import React, { useState, useEffect } from 'react';
import { ThumbsUp, ThumbsDown, Mic, List, Plus, Trash2, Filter, MessageSquare, X } from 'lucide-react';

export default function LifeRatingTracker() {
  const [items, setItems] = useState([]);
  const [inputText, setInputText] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('All');
  const [isLoading, setIsLoading] = useState(true);
  const [editingComment, setEditingComment] = useState(null);
  const [commentText, setCommentText] = useState('');

  useEffect(() => {
    const loadItems = async () => {
  try {
    const keys = Object.keys(localStorage).filter(k => k.startsWith('item:'));
    const loadedItems = keys.map(k => JSON.parse(localStorage.getItem(k)));
    setItems(loadedItems.sort((a, b) => b.timestamp - a.timestamp));
  } catch (error) {
    console.error('Error loading items:', error);
  }
  setIsLoading(false);
};
  const detectCategory = (text) => {
    const lower = text.toLowerCase();
    
    // More comprehensive categories with extensive keywords
    const categories = {
      'Food & Dining': [
        'restaurant', 'meal', 'dinner', 'lunch', 'breakfast', 'brunch', 'food', 'dish', 'ate', 'eating',
        'pizza', 'burger', 'sushi', 'pasta', 'salad', 'sandwich', 'soup', 'steak', 'chicken', 'fish',
        'seafood', 'vegetarian', 'vegan', 'dessert', 'ice cream', 'bakery', 'deli', 'takeout', 'delivery',
        'menu', 'ordered', 'chef', 'cuisine', 'thai', 'indian', 'chinese', 'japanese', 'mexican', 'italian',
        'french', 'Mediterranean', 'bbq', 'grill', 'buffet', 'bistro', 'diner', 'eatery', 'tasted', 'flavor', "restaurant","ramen","pizza","burger","pasta","sushi","taco","curry","noodles","sandwich","steak","chicken","seafood","bakery","diner","bistro","salad","fries","wings","nachos","burrito","falafel","gyro","pho","dim sum","bibimbap","pad thai","massaman curry","neapolitan pizza","peking duck","rendang","som tam","chili crab","cacio e pepe","baklava","guinea pig","escaveche","laksa","escargot","stroganoff","katsu","tempura","onigiri","udon","soba","biryani","dosa","samosa","butter chicken","tikka masala","falooda","poutine","tourti√®re","boudin","gumbo","jambalaya","beignet","lobster roll","clam chowder","key lime pie","reuben","cheeseburger","hot dog","corn dog","mac and cheese","grilled cheese","BLT","club sandwich","wrap","quesadilla","enchilada","empanada","arepa","pupusa","tamale","ceviche","poke bowl","acai bowl","quinoa bowl","buddha bowl","caesar salad","greek salad","cob salad","potato salad","coleslaw","hummus","tzatziki","guacamole","salsa","chips","popcorn","pretzel","donut","bagel","croissant","muffin","pancake","waffle","french toast","eggs benedict","omelette","quiche","frittata","hash browns","bacon","sausage","ham","turkey","roast beef","pulled pork","brisket","ribs","meatloaf","chili","soup","stew","risotto","paella","couscous","tabbouleh","falafel wrap","shawarma","kebab","souvlaki","moussaka","spanakopita","dolma","borek","knish","latke","blini","pierogi","pelmeni","vareniki","goulash","paprikash","sauerkraut","kimchi","japchae","bulgogi","galbi","hot pot","shabu shabu","sukiyaki","okonomiyaki","takoyaki","gyoza","baozi","xiaolongbao","congee","italian restaurant","chinese restaurant","mexican restaurant","indian restaurant","thai restaurant","japanese restaurant","french bistro","steakhouse","seafood spot","vegetarian eatery","vegan cafe","fast food joint","fine dining","brunch spot","diner breakfast","bbq joint","sushi bar","taco stand","ramen shop","pizza parlor","burger joint","pasta house","curry house","noodle bar","sandwich shop","grill restaurant","rooftop dining","patio seating","family restaurant","romantic dinner spot","quick lunch","takeout order","delivery service","reservation needed","waiter service","chef special","menu variety","portion size","restaurant ambiance","dinner reservation"],"cuisine","eatery","grill","kitchen"]
      ,
      'Cheese': [
        'cheese', 'brie', 'cheddar', 'gouda', 'mozzarella', 'parmesan', 'feta', 'blue cheese', 'camembert',
        'gruyere', 'swiss', 'provolone', 'ricotta', 'manchego', 'aged', 'sharp', 'mild', 'soft cheese',
        'hard cheese', 'cream cheese', 'goat cheese', "cheese","cheddar","brie","gouda","mozzarella","parmesan","feta","camembert","gruyere","manchego","pecorino","ricotta","stilton","roquefort","gorgonzola","emmental","havarti","provolone","parmigiano reggiano","epoisses","swiss","monterey jack","muenster","blue cheese","irish cheddar","buffalo mozzarella","colby jack","edam","pepper jack","goat cheese","colby","emmentaler","cream cheese","comte","american farmhouse cheddar","cottage cheese","grana padano","halloumi","rembrandt gouda","sharp provolone","danish blue","saint albray","appenzeller","mascarpone","tomme de savoie","string cheese","saint marcellin","american cheese","pont l'eveque","mahon","cantal","emmental francais","selles sur cher","neufchatel","morbier","fourme de montbrison","caprice des dieux","reblochon","coulommiers","taleggio","vacherin","beaufort","beaufort alpage","abondance","saint paulin","chaource","livarot","rocamadour","cambozola","oregon blue vein","leonora goat cheese","pimento cheese","banon","cabrales","tete de moine","boerenkaas","emmental de savoie","brocciu","laguiole","limburger","queso de bola","maroilles","stichelton","ossau iraty","saint nectaire","crottin de chavignol","mimolette","pelardon","fourme dambert","fromage frais","bleu du vercors sassenage","cabecou","saint felicien","bleu d'auvergne","bleu de bresse","farmer cheese","hooligan","bleu des causses","cotija","burrata","oaxaca","fontina","asiago","chihuahua","raclette","romano","jarlsberg","mizithra","panela","provel","asadero","dubliner","fontinella","kasseri","paneer","bocconcini","sharp cheddar","mild cheddar","extra sharp cheddar","white cheddar","new york style cheddar","vermont cheddar","aged gouda","young gouda","smoked gouda","goat feta","sheep feta","blue stilton","gorgonzola dolce","gorgonzola piccante","roquefort piquant","danish gorgonzola","cabrales blue","valdeon","tetilla","idiiazabal","roncal","aragon","zamora","la peral","beyaz peynir","kasar peyniri","otlu peynir","tulum peyniri","montasio","scamorza","caciocavallo","provola","stracchino","quadrello di bufala","bitto","dolcelatte","castello blue","wensleydale","cheshire","double gloucester","caerphilly","lanark blue","dunsyre blue","crowdie","caboc","bonchester","dorset blue vinney","shropshire blue","stinking bishop","bartlett","cooper hill","appleby's cheshire","red dragon","yarg","cornish brie","devon blue","ribblesdale","mendip","westcombe"
      ],
      'Coffee': [
        'coffee', 'cafe', 'espresso', 'latte', 'cappuccino', 'americano', 'mocha', 'macchiato', 'cortado',
        'flat white', 'cold brew', 'iced coffee', 'frappuccino', 'starbucks', 'barista', 'brew', 'roast',
        'tea', 'chai', 'matcha', 'green tea', 'black tea', 'herbal tea', 'boba', 'bubble tea'
      ],
      'Beverages': [
        'drink', 'beverage', 'cocktail', 'beer', 'wine', 'whiskey', 'vodka', 'gin', 'rum', 'tequila',
        'margarita', 'mojito', 'martini', 'bar', 'pub', 'brewery', 'winery', 'spirits', 'alcohol',
        'juice', 'smoothie', 'shake', 'soda', 'water', 'sparkling', "bar","pub","cocktail","brewery","beer","wine","gin","vodka","whiskey","rum","tequila","ale","lager","cider","spirits","champagne","prosecco","martini","margarita","mojito","old fashioned","negroni","daiquiri","manhattan","cosmopolitan","bloody mary","pina colada","mai tai","zombie","espresso martini","irish coffee","white russian","black russian","screwdriver","vodka tonic","gin and tonic","whiskey sour","rum and coke","tequila sunrise","blue lagoon","sex on the beach","long island iced tea","appletini","lemon drop","godfather","rusty nail","french 75","sidecar","sazerac","aviation","last word","paper plane","penicillin","naked and famous","oaxaca old fashioned","vesper","vesper martini","dirty martini","dry martini","wet martini","perfect martini","vodka martini","gibson","rob roy","boulevardier","blood and sand","angel's share","jack rose","monkey gland","between the sheets","el presidente","daiquiri no 3","mary pickford","zombie 1934","painkiller","dark n stormy","moscow mule","paloma","ranch water","texas ranger","bloody maria","michelada","caipirinha","caipiroska","batida","batanga","el diablo","mule","kentucky mule","gin mule","irish mule","ginger mule","kentucky colonel","mint julep","el toro","cuba libre","sea breeze","bay breeze","cape codder","madras","harvey wallbanger","fuzzy navel","tootsie roll","kamikaze","b-52","tequila sunrise","blue hawaiian","hawaiian punch","strawberry daiquiri","frozen margarita","frozen daiquiri","frozen mudslide","grasshopper","mudslide","chocolate martini","dive bar","rooftop bar","sports bar","wine bar","craft cocktail bar","happy hour","pub trivia","karaoke bar","live music pub","bar patio","speakeasy","tiki bar","irish pub","microbrewery taproom","bar snacks","nuts mix","olives","cheese board","charcuterie","pretzel bites","wings platter","pub fries","onion rings","trivia night","poker night","bartender service","bar vibe","crowded pub", "taproom","brewpub","tavern","lounge"
      ],
      'Dates': [
        'date', 'dating', 'went out', 'met up', 'tinder', 'bumble', 'hinge', 'match', 'romance', 'romantic',
        'boyfriend', 'girlfriend', 'partner', 'seeing someone', 'relationship', 'first date', 'second date',
        'coffee date', 'dinner date', 'dating app', 'setup', 'blind date', 'speed dating', "date","dating","romantic","anniversary","valentine","proposal","engagement","wedding","relationship","boyfriend","girlfriend","partner","spouse","movie night","dinner date","picnic","beach walk","hike","museum visit","concert","wine tasting","cooking class","stargazing","amusement park","spa day","rooftop bar","art gallery","bike ride","kayaking","pottery class","bookstore browse","farmers market","sunset cruise","dance lesson","escape room","hot air balloon","couples massage","theater show","ice skating","candlelit dinner","road trip","volunteer together","game night","yoga class","photo shoot","baking together","gardening","puzzle night","live music","trivia night","bowling","mini golf","rooftop yoga","sunrise hike","valentine's dinner","anniversary trip","proposal spot","engagement party","wedding venue","romantic getaway","couple's retreat","love letter exchange","memory lane walk","future planning date"
      ],
      'People': [
        'person', 'friend', 'met', 'someone', 'colleague', 'coworker', 'boss', 'manager', 'team', 'neighbor',
        'acquaintance', 'stranger', 'conversation', 'chat', 'talked', 'spoke', 'networking', 'social',
        'party', 'gathering', 'meetup', 'hangout', 'catch up', 'reunion'
      ],
      'Activities': [
        'tennis', 'game', 'played', 'match', 'workout', 'exercise', 'gym', 'fitness', 'training', 'run',
        'running', 'jogging', 'cycling', 'swimming', 'yoga', 'pilates', 'crossfit', 'weights', 'cardio',
        'basketball', 'soccer', 'football', 'baseball', 'golf', 'volleyball', 'badminton', 'squash',
        'hiking', 'climbing', 'boxing', 'martial arts', 'spin class', 'zumba', 'dance class',  'hobby', 'craft', 'diy', 'project', 'painting', 'drawing', 'art', 'photography', 'photo',
        'knitting', 'sewing', 'cooking', 'baking', 'recipe', 'gardening', 'plants', 'collecting',
        'gaming', 'video game', 'board game', 'puzzle', 'lego', 'model', 'creative', "football","soccer","basketball","tennis","cricket","rugby","baseball","hockey","golf","swimming","match","championship","tournament","volleyball","table tennis","badminton","boxing","wrestling","martial arts","karate","judo","gymnastics","athletics","track","field","surfing","skiing","snowboarding","skateboarding","climbing","hiking","running","cycling","yoga","pilates","archery","bmx","fencing","handball","lacrosse","netball","polo","squash","water polo","curling","darts","equestrian","fishing","formula 1","motocross","nascar","paddleboarding","rowing","sailing","scuba diving","snorkeling","triathlon","ultimate frisbee","weightlifting","windsurfing","zumba","aerobics","crossfit","kickboxing","muay thai","taekwondo","brazilian jiu-jitsu","capoeira","kendo","shooting","bowling","cheerleading","dance","figure skating","speed skating","bobsled","luge","skeleton","alpine skiing","freestyle skiing","snowshoeing","ice hockey","field hockey","roller derby","softball","rounders","korfball","sepak takraw","kabaddi","p√©tanque","bocce","croquet","pickleball","padel"
      ],
      'Culture': [
        'movie', 'film', 'cinema', 'show', 'series', 'episode', 'season', 'netflix', 'hbo', 'streaming',
        'book', 'read', 'novel', 'author', 'podcast', 'music', 'song', 'album', 'concert', 'gig',
        'performance', 'theater', 'play', 'musical', 'comedy show', 'standup', 'museum', 'gallery',
        'exhibition', 'watched', 'listened', 'binge', 'documentary', 'anime', 'manga', "concert","festival","show","performance","theater","theatre","comedy","stand-up","magic","circus","exhibition","gig","club","nightclub","disco","rave","party","event","taylor swift tour","beyonce concert","elton john farewell","dua lipa show","paul mccartney gig","kendrick lamar festival","haim performance","bad bunny rave","lizzo stand-up","bono exhibition","the 1975 club","prince tour","madonna concert","aretha franklin show","johnny cash gig","jimi hendrix festival","grand ole opry","gemini comedy","lauren taylor studio","broadway musical","off-broadway play","improv night","karaoke party","open mic","poetry slam","drag show","burlesque performance","cabaret","opera","ballet","symphony","jazz club","blues festival","rock concert","pop show","hip hop gig","country music event","electronic dance rave","indie festival","film screening","movie marathon","tv series binge","podcast live","game show taping","talent competition","award ceremony","red carpet event","super bowl halftime","olympics opening","coachella","glastonbury","burning man","sxsw","comic-con","edinburgh fringe"
      ],
      'Things': [
        'bought', 'purchased', 'shopping', 'store', 'shop', 'mall', 'online', 'amazon', 'product',
        'brand', 'clothes', 'clothing', 'shoes', 'sneakers', 'fashion', 'accessories', 'gadget',
        'tech', 'phone', 'laptop', 'computer', 'electronics', 'furniture', 'decor', 'appliance'
      ],
      'Places': [
        'visited', 'trip', 'travel', 'vacation', 'holiday', 'location', 'destination', 'city', 'country',
        'hotel', 'hostel', 'airbnb', 'resort', 'beach', 'mountain', 'park', 'attraction', 'tourist',
        'sightseeing', 'flight', 'airport', 'train', 'road trip', 'adventure', 'explore', 'wanderlust', "museum","park","beach","monument","gallery","plaza","square","garden","island","mountain","lake","resort","castle","palace","temple","cathedral","statue of liberty","eiffel tower","big ben","leaning tower of pisa","colosseum","taj mahal","great wall of china","pyramids of giza","sydney opera house","burj khalifa","times square","central park","grand canyon","niagara falls","mount rushmore","alcatraz island","metropolitan museum of art","national museum of world war ii","louvre museum","vatican city","sistine chapel","venice canals","amalfi coast","santorini","machu picchu","christ the redeemer","petra","great barrier reef","yellowstone national park","yosemite national park","zion national park","banff national park","sahara desert","amazon rainforest","galapagos islands","fjord norway","iceland blue lagoon","tokyo tower","shanghai bund","hong kong victoria peak","dubai mall","abu dhabi louvre","cape town table mountain","rio de janeiro copacabana","buenos aires tango district","mexico city zocalo","cancun beaches","havana old town","toronto cn tower","vancouver stanley park","seattle space needle","las vegas strip","miami south beach","new orleans french quarter","chicago millennium park","boston freedom trail","washington dc mall","philadelphia liberty bell","san francisco golden gate","los angeles hollywood sign","disneyland","universal studios","stonehenge","edinburgh castle","dublin temple bar","amsterdam canals","brussels grand place","berlin wall","prague charles bridge","budapest parliament","vienna schonnbrunn","moscow red square","st petersburg hermitage","istanbul hagia sophia","athens acropolis","rome trevi fountain","barcelona sagrada familia","madrid prado museum","lisbon belem tower","porto ribeira","seville alcazar", "tourist","attraction","landmark","historic",
      ],
      'Work': [
        'work', 'job', 'career', 'office', 'meeting', 'presentation', 'project', 'deadline', 'client',
        'interview', 'promotion', 'raise', 'salary', 'boss', 'colleague', 'professional', 'business',
        'conference', 'workshop', 'training', 'corporate', 'startup', 'company'
      ],
      'Health': [
        'doctor', 'dentist', 'appointment', 'checkup', 'therapy', 'therapist', 'medication', 'medicine',
        'health', 'wellness', 'medical', 'hospital', 'clinic', 'treatment', 'massage', 'spa', 'relaxation',
        'meditation', 'mindfulness', 'sleep', 'rest', 'recovery'
      ],
'Books': ["novel","memoir","biography","poetry","textbook","book","onyx storm","the tenant","one golden summer","my friends","the covenant of water","shield maiden","deep end","first-time caller","scythe and sparrow","rebel witch","famous last words","sunrise on the reaping","wild dark shore","atmosphere","broken country","the crash","beautiful ugly","the favorites","witchcraft for wayward girls","the midnight library","atomic habits","educated","i'm glad my mom died","the seven husbands of evelyn hugo","book lovers","the love hypothesis","it ends with us","verity","the silent patient","where the crawdads sing","the song of achilles","circe","a court of thorns and roses","the housemaid","the guest list","the hunt for red october","1984","to kill a mockingbird","pride and prejudice","the great gatsby","harry potter and the sorcerer's stone","the da vinci code","the alchemist","sapiens","becoming","the power of habit","quiet","daring greatly","the body keeps the score","how to win friends and influence people","thinking fast and slow","man‚Äôs search for meaning","the subtle art of not giving a f*ck","milk and honey","the sun and her flowers","goodreads choice awards 2025 winner", "author","reading","literature",
],
'Movies': ["film","cinema","documentary","series","episode","the godfather","casablanca","l.a. confidential","seven samurai","parasite","schindler's list","the shawshank redemption","the dark knight","12 angry men","the godfather part ii","pulp fiction","forrest gump","the good the bad and the ugly","the lord of the rings the return of the king","fight club","inception","goodfellas","star wars a new hope","the matrix","se7en","city of god","it's a wonderful life","the silence of the lambs","saving private ryan","life is beautiful","spirited away","interstellar","the green mile","singin' in the rain","the pianist","the lion king","back to the future","american history x","gladiator","the usual suspects","leon the professional","the prestige","memento","whiplash","the intouchables","alien","once upon a time in the west","rear window","psycho","the shining","raiders of the lost ark","toy story","jaws","clockwork orange","the empire strikes back","amadeus","the sting","braveheart","good will hunting","la la land","moonlight","get out","birdman","mad max fury road","spotlight","room","the revenant","the big short","12 years a slave","argo","gravity","her","the wolf of wall street","dallas buyers club","the king's speech","black swan","the social network","the hurt locker","slumdog millionaire","no country for old men","the departed","brokeback mountain","crash","million dollar baby","finding nemo","lord of the rings the fellowship of the ring","titanic","jurassic park", "actor","director","netflix","disney"
],
};

    // Check each category and return the first match
    for (const [category, keywords] of Object.entries(categories)) {
      if (keywords.some(keyword => lower.includes(keyword))) {
        return category;
      }
    }
    
    return 'Other';
  };

import React, { useState, useEffect } from 'react';
import { ThumbsUp, ThumbsDown, Mic, List, Plus, Trash2, Filter, MessageSquare } from 'lucide-react';

export default function LifeRatingTracker() {
  const [items, setItems] = useState([]);
  const [inputText, setInputText] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('All');
  const [isLoading, setIsLoading] = useState(true);
  const [editingComment, setEditingComment] = useState(null);
  const [commentText, setCommentText] = useState('');

  // Load items from localStorage
  useEffect(() => {
    const loadItems = () => {
      try {
        const keys = Object.keys(localStorage).filter(k => k.startsWith('item:'));
        const loadedItems = keys.map(k => JSON.parse(localStorage.getItem(k)));
        setItems(loadedItems.sort((a, b) => b.timestamp - a.timestamp));
      } catch (error) {
        console.error('Error loading items:', error);
      }
      setIsLoading(false);
    };
    loadItems();
  }, []);

  // Category detection
  const detectCategory = (text) => {
    const lower = text.toLowerCase();
    const categories = {
      'Food': ['restaurant', 'meal', 'pizza', 'burger', 'sushi', 'pasta', 'salad', 'steak', 'chicken', 'seafood', 'dessert'],
      'Cheese': ['cheese', 'brie', 'cheddar', 'gouda', 'mozzarella', 'parmesan'],
      'Coffee': ['coffee', 'latte', 'cappuccino', 'espresso'],
      'Beverages': ['drink', 'beer', 'wine', 'cocktail', 'juice'],
      'Dates': ['date', 'romantic', 'partner', 'anniversary'],
      'People': ['friend', 'met', 'someone', 'colleague', 'conversation'],
      'Activities': ['tennis', 'workout', 'yoga', 'painting', 'gaming', 'hiking'],
      'Culture': ['movie', 'film', 'book', 'concert', 'music', 'podcast', 'series'],
      'Things': ['bought', 'shopping', 'store', 'product', 'clothes', 'tech'],
      'Places': ['visited', 'trip', 'travel', 'hotel', 'beach', 'mountain', 'museum'],
      'Work': ['work', 'job', 'office', 'project', 'meeting'],
      'Health': ['doctor', 'dentist', 'therapy', 'health', 'medicine'],
      'Other': []
    };

    for (const [category, keywords] of Object.entries(categories)) {
      if (keywords.some(keyword => lower.includes(keyword))) return category;
    }
    return 'Other';
  };

  // Add a new item
  const addItem = (rating) => {
    if (!inputText.trim()) return;

    const newItem = {
      id: Date.now().toString(),
      text: inputText.trim(),
      rating,
      category: detectCategory(inputText),
      timestamp: Date.now(),
      date: new Date().toLocaleDateString()
    };

    localStorage.setItem(`item:${newItem.id}`, JSON.stringify(newItem));
    setItems(prev => [newItem, ...prev]);
    setInputText('');
  };

  // Delete an item
  const deleteItem = (id) => {
    localStorage.removeItem(`item:${id}`);
    setItems(prev => prev.filter(item => item.id !== id));
  };

  // Start editing a comment
  const startEditingComment = (item) => {
    setEditingComment(item.id);
    setCommentText(item.comment || '');
  };

  // Save a comment
  const saveComment = (id) => {
    const updatedItem = items.find(item => item.id === id);
    if (!updatedItem) return;

    updatedItem.comment = commentText;
    localStorage.setItem(`item:${id}`, JSON.stringify(updatedItem));
    setItems(prev => prev.map(item => item.id === id ? updatedItem : item));
    cancelEditingComment();
  };

  // Cancel comment editing
  const cancelEditingComment = () => {
    setEditingComment(null);
    setCommentText('');
  };

  // Filtered categories
  const categories = ['All', ...new Set(items.map(item => item.category))].sort();
  const filteredItems = selectedCategory === 'All'
    ? items
    : items.filter(item => item.category === selectedCategory);

  const getRatingEmoji = (rating) => rating === 'like' ? 'üëç' : 'üëé';
  const getRatingColor = (rating) => rating === 'like' ? 'bg-green-100 text-green-800 border-green-300' : 'bg-red-100 text-red-800 border-red-300';

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center">
        <div className="text-gray-600">Loading...</div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 pb-6">
      <div className="max-w-2xl mx-auto px-4 py-6">
        {/* Header */}
        <div className="text-center mb-6">
          <h1 className="text-3xl font-bold text-gray-800 mb-2">Binary</h1>
          <p className="text-gray-600">Yes/no, that's all</p>
        </div>

        {/* Input Section */}
        <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
          <div className="flex items-center gap-2 mb-4">
            <div className="relative flex-1">
              <input
                type="text"
                value={inputText}
                onChange={(e) => setInputText(e.target.value)}
                placeholder="What did you experience? (e.g., 'Tried aged cheddar')"
                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:outline-none"
                onKeyPress={(e) => e.key === 'Enter' && inputText.trim() && document.getElementById('like-btn').focus()}
              />
              <Mic className="absolute right-3 top-3.5 text-gray-400 w-5 h-5" />
            </div>
          </div>

          <div className="text-xs text-gray-500 mb-3 text-center">
            Tap the microphone icon on your keyboard to use voice input
          </div>

          <div className="flex gap-3">
            <button
              id="like-btn"
              onClick={() => addItem('like')}
              disabled={!inputText.trim()}
              className="flex-1 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white font-semibold py-3 px-6 rounded-xl flex items-center justify-center gap-2 transition-colors"
            >
              <ThumbsUp className="w-5 h-5" />
              Like
            </button>
            <button
              onClick={() => addItem('dislike')}
              disabled={!inputText.trim()}
              className="flex-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-semibold py-3 px-6 rounded-xl flex items-center justify-center gap-2 transition-colors"
            >
              <ThumbsDown className="w-5 h-5" />
              Dislike
            </button>
          </div>
        </div>

        {/* Category Filter */}
        {items.length > 0 && (
          <div className="bg-white rounded-2xl shadow-lg p-4 mb-6">
            <div className="flex items-center gap-2 mb-3">
              <Filter className="w-4 h-4 text-gray-600" />
              <span className="font-semibold text-gray-700">Filter by category:</span>
            </div>
            <div className="flex flex-wrap gap-2">
              {categories.map(cat => (
                <button
                  key={cat}
                  onClick={() => setSelectedCategory(cat)}
                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                    selectedCategory === cat
                      ? 'bg-purple-500 text-white'
                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                  }`}
                >
                  {cat}
                </button>
              ))}
            </div>
          </div>
        )}

        {/* Items List */}
        <div className="space-y-3">
          {filteredItems.length === 0 ? (
            <div className="bg-white rounded-2xl shadow-lg p-12 text-center">
              <List className="w-12 h-12 text-gray-300 mx-auto mb-4" />
              <p className="text-gray-500">
                {items.length === 0 
                  ? "No ratings yet. Start by rating your first experience!"
                  : "No items in this category yet."}
              </p>
            </div>
          ) : (
            filteredItems.map(item => (
              <div
                key={item.id}
                className="bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow"
              >
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-1">
                      <span className={`px-3 py-1 rounded-full text-sm font-semibold border-2 ${getRatingColor(item.rating)}`}>
                        {getRatingEmoji(item.rating)} {item.rating === 'like' ? 'Liked' : 'Disliked'}
                      </span>
                      <span className="px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700">
                        {item.category}
                      </span>
                    </div>
                    <p className="text-gray-800 font-medium mb-1">{item.text}</p>
                    <p className="text-sm text-gray-500">{item.date}</p>
                    
                    {/* Comment Section */}
                    {editingComment === item.id ? (
                      <div className="mt-3 space-y-2">
                        <textarea
                          value={commentText}
                          onChange={(e) => setCommentText(e.target.value)}
                          placeholder="Add your thoughts..."
                          className="w-full px-3 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-400 focus:outline-none resize-none"
                          rows="3"
                          autoFocus
                        />
                        <div className="flex gap-2">
                          <button
                            onClick={() => saveComment(item.id)}
                            className="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm font-medium transition-colors"
                          >
                            Save
                          </button>
                          <button
                            onClick={cancelEditingComment}
                            className="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg text-sm font-medium transition-colors"
                          >
                            Cancel
                          </button>
                        </div>
                      </div>
                    ) : (
                      <>
                        {item.comment && (
                          <div className="mt-2 p-3 bg-gray-50 rounded-lg">
                            <p className="text-sm text-gray-700 italic">{item.comment}</p>
                          </div>
                        )}
                        <button
                          onClick={() => startEditingComment(item)}
                          className="mt-2 flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700 font-medium"
                        >
                          <MessageSquare className="w-4 h-4" />
                          {item.comment ? 'Edit comment' : 'Add comment'}
                        </button>
                      </>
                    )}
                  </div>
                  <button
                    onClick={() => deleteItem(item.id)}
                    className="ml-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors"
                  >
                    <Trash2 className="w-5 h-5" />
                  </button>
                </div>
              </div>
            ))
          )}
        </div>

        {/* Stats */}
        {items.length > 0 && (
          <div className="mt-6 bg-white rounded-2xl shadow-lg p-6">
            <h3 className="font-bold text-gray-800 mb-3">Your Stats</h3>
            <div className="grid grid-cols-2 gap-4">
              <div className="text-center p-4 bg-green-50 rounded-xl">
                <div className="text-3xl font-bold text-green-600">
                  {items.filter(i => i.rating === 'like').length}
                </div>
                <div className="text-sm text-gray-600">Liked</div>
              </div>
              <div className="text-center p-4 bg-red-50 rounded-xl">
                <div className="text-3xl font-bold text-red-600">
                  {items.filter(i => i.rating === 'dislike').length}
                </div>
                <div className="text-sm text-gray-600">Disliked</div>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
